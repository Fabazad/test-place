{"version":3,"file":"constants.js","sources":["utils/constants.ts"],"sourceRoot":"/","sourcesContent":["import { TestStatus } from \"@/entities/Test/test.constants.js\";\nimport z from \"zod\";\nimport { InferEnum } from \"./inferEnum.js\";\n\nexport const Role = {\n  TESTER: \"TESTER\",\n  SELLER: \"SELLER\",\n  ADMIN: \"ADMIN\",\n} as const;\nexport type Role = InferEnum<typeof Role>;\n\nexport const NotificationType = {\n  NEW_REQUEST: \"NEW_REQUEST\",\n  REQUEST_ACCEPTED: \"REQUEST_ACCEPTED\",\n  REQUEST_CANCELLED: \"REQUEST_CANCELLED\",\n  REQUEST_DECLINED: \"REQUEST_DECLINED\",\n  PRODUCT_ORDERED: \"PRODUCT_ORDERED\",\n  PRODUCT_RECEIVED: \"PRODUCT_RECEIVED\",\n  PRODUCT_REVIEWED: \"PRODUCT_REVIEWED\",\n  REVIEW_VALIDATED: \"REVIEW_VALIDATED\",\n  REVIEW_REFUSED: \"REVIEW_REFUSED\",\n  MONEY_SENT: \"MONEY_SENT\",\n  MONEY_RECEIVED: \"MONEY_RECEIVED\",\n  TEST_CANCELLED: \"TEST_CANCELLED\",\n  NEW_MESSAGE: \"NEW_MESSAGE\",\n} as const;\nexport type NotificationType = InferEnum<typeof NotificationType>;\n\nexport const constants = {\n  MONGO_LOCAL_URL: \"mongodb://127.0.0.1:27017/test-place\",\n  S3_BUCKET: \"test-place\",\n  MAIL_TEMPLATES_IDS: {\n    RESET_PASSWORD: {\n      fr: \"d-d4d5481b37e648b0ad6583ef88d572d6\",\n      en: \"d-bb68b3f6b9fa4974a594ff5ffb267e4c\",\n      ch: \"d-88b15567c0b940998564bef2f3363578\",\n    },\n    VALIDATE_EMAIL: {\n      fr: \"d-d1da8fb375f742619f281f9b661f2d05\",\n      en: \"d-4c666327a316434c9d30c5212e429882\",\n      ch: \"d-eafffb5b610f403d8d7b24ca419526f3\",\n    },\n    CONTACT_US: {\n      fr: \"d-f6c3402ef59f461a8657f3b3c3cde90f\",\n      en: \"d-f6c3402ef59f461a8657f3b3c3cde90f\",\n      ch: \"d-f6c3402ef59f461a8657f3b3c3cde90f\",\n    },\n    NOTIFICATION: {\n      fr: \"d-141262cf223c4349955b40f956003808\",\n      en: \"d-5e97b4d4dbcd4961861013130b835a71\",\n      ch: \"d-4fc7e2093855454ea5c5d3ad443f6e35\",\n    },\n  },\n  GENDERS: {\n    MALE: \"MALE\",\n    FEMALE: \"FEMALE\",\n  },\n};\n\nexport const AUTH_CONDITIONS = {\n  IS_SELLER: \"IS_SELLER\",\n  ANY: \"ANY\",\n} as const;\n\nexport type AuthCondition = InferEnum<typeof AUTH_CONDITIONS>;\n\nexport const testStatusUpdateParamsSchema = z.discriminatedUnion(\"status\", [\n  z.object({\n    status: z.literal(TestStatus.REQUEST_CANCELLED),\n    params: z.object({\n      cancelRequestReason: z.string(),\n    }),\n  }),\n  z.object({\n    status: z.literal(TestStatus.REQUEST_DECLINED),\n    params: z.object({\n      declineRequestReason: z.string(),\n    }),\n  }),\n  z.object({\n    status: z.literal(TestStatus.REQUEST_ACCEPTED),\n    params: z.object({\n      sellerMessage: z.string(),\n    }),\n  }),\n  z.object({\n    status: z.literal(TestStatus.PRODUCT_ORDERED),\n    params: z.object({\n      orderId: z.string(),\n      orderScreenshotUrl: z.string(),\n      estimatedDeliveryDate: z.date().min(new Date()).optional(),\n    }),\n  }),\n  z.object({\n    status: z.literal(TestStatus.PRODUCT_RECEIVED),\n  }),\n  z.object({\n    status: z.literal(TestStatus.PRODUCT_REVIEWED),\n    params: z.object({\n      reviewId: z.string(),\n      reviewScreenshotUrl: z.string(),\n    }),\n  }),\n  z.object({\n    status: z.literal(TestStatus.REVIEW_VALIDATED),\n  }),\n  z.object({\n    status: z.literal(TestStatus.REVIEW_REFUSED),\n    params: z.object({\n      declineReviewReason: z.string(),\n    }),\n  }),\n  z.object({\n    status: z.literal(TestStatus.MONEY_SENT),\n  }),\n  z.object({\n    status: z.literal(TestStatus.MONEY_RECEIVED),\n  }),\n  z.object({\n    status: z.literal(TestStatus.TEST_CANCELLED),\n    params: z.object({\n      cancelReason: z.string(),\n    }),\n  }),\n]);\n\nexport type TestStatusUpdateParams = z.infer<typeof testStatusUpdateParamsSchema>;\n\ntype TestStatusProcessStep = {\n  previous: TestStatus | Array<TestStatus> | null;\n  role?: Role;\n  params?: string[];\n  notificationType: NotificationType;\n};\n\nexport const TEST_STATUS_PROCESSES: Record<TestStatus, TestStatusProcessStep> = {\n  [TestStatus.REQUESTED]: {\n    previous: null,\n    role: Role.TESTER,\n    notificationType: NotificationType.NEW_REQUEST,\n  },\n  [TestStatus.REQUEST_CANCELLED]: {\n    previous: TestStatus.REQUESTED,\n    role: Role.TESTER,\n    notificationType: NotificationType.PRODUCT_ORDERED,\n  },\n  [TestStatus.REQUEST_DECLINED]: {\n    previous: TestStatus.REQUESTED,\n    role: Role.SELLER,\n    notificationType: NotificationType.REQUEST_DECLINED,\n  },\n  [TestStatus.REQUEST_ACCEPTED]: {\n    previous: TestStatus.REQUESTED,\n    role: Role.SELLER,\n    notificationType: NotificationType.REQUEST_ACCEPTED,\n  },\n  [TestStatus.PRODUCT_ORDERED]: {\n    previous: TestStatus.REQUEST_ACCEPTED,\n    role: Role.TESTER,\n    notificationType: NotificationType.PRODUCT_ORDERED,\n  },\n  [TestStatus.PRODUCT_RECEIVED]: {\n    previous: TestStatus.PRODUCT_ORDERED,\n    role: Role.TESTER,\n    notificationType: NotificationType.PRODUCT_RECEIVED,\n  },\n  [TestStatus.PRODUCT_REVIEWED]: {\n    previous: TestStatus.PRODUCT_RECEIVED,\n    role: Role.TESTER,\n    notificationType: NotificationType.PRODUCT_REVIEWED,\n  },\n  [TestStatus.REVIEW_VALIDATED]: {\n    previous: TestStatus.PRODUCT_REVIEWED,\n    role: Role.SELLER,\n    notificationType: NotificationType.REVIEW_VALIDATED,\n  },\n  [TestStatus.REVIEW_REFUSED]: {\n    previous: TestStatus.PRODUCT_REVIEWED,\n    role: Role.SELLER,\n    notificationType: NotificationType.REVIEW_REFUSED,\n  },\n  [TestStatus.MONEY_SENT]: {\n    previous: TestStatus.REVIEW_VALIDATED,\n    role: Role.SELLER,\n    notificationType: NotificationType.MONEY_SENT,\n  },\n  [TestStatus.MONEY_RECEIVED]: {\n    previous: [\n      TestStatus.PRODUCT_REVIEWED,\n      TestStatus.MONEY_SENT,\n      TestStatus.REVIEW_VALIDATED,\n    ],\n    notificationType: NotificationType.MONEY_RECEIVED,\n  },\n  [TestStatus.TEST_CANCELLED]: {\n    previous: Object.values(TestStatus).filter(\n      (status: string) =>\n        !(\n          [TestStatus.TEST_CANCELLED, TestStatus.MONEY_RECEIVED] as Array<string>\n        ).includes(status)\n    ),\n    notificationType: NotificationType.TEST_CANCELLED,\n  },\n} as const;\n\nexport const VALID_TEST_STATUSES: Array<TestStatus> = [\n  TestStatus.REQUESTED,\n  TestStatus.REQUEST_ACCEPTED,\n  TestStatus.PRODUCT_ORDERED,\n  TestStatus.PRODUCT_RECEIVED,\n  TestStatus.PRODUCT_REVIEWED,\n  TestStatus.REVIEW_VALIDATED,\n] as const;\n"],"names":[],"mappings":"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","debug_id":"74673d54-a1f0-513f-9617-9147ebf014f9"}