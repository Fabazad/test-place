{"version":3,"file":"affiliation.routes.js","sources":["routes/affiliation.routes.ts"],"sourceRoot":"/","sourcesContent":["import { AffiliationController } from \"@/controllers/affiliation.controller.js\";\nimport { withAuth } from \"@/middlewares/withAuth.js\";\nimport { asyncHandler } from \"@/utils/asyncHandler.js\";\nimport { handleResponseForRoute } from \"@/utils/CustomResponse.js\";\nimport { zodValidationForRoute } from \"@/utils/zodValidationForRoute.js\";\nimport express from \"express\";\nimport { z } from \"zod\";\n\nexport const affiliationRouter = express.Router();\n\naffiliationRouter.get(\"/affiliated\", withAuth(), async (request, reply) => {\n  const { page, itemsPerPage } = zodValidationForRoute(\n    request.query,\n    z.object({\n      page: z.coerce.number().min(1).default(1),\n      itemsPerPage: z.coerce.number().min(1).max(100).default(10),\n    })\n  );\n  const { userId } = request.decoded!;\n\n  const res = await AffiliationController.getUserAffiliated({\n    userId,\n    page,\n    itemsPerPage,\n  });\n\n  reply.send(handleResponseForRoute(res));\n});\n\naffiliationRouter.get(\n  \"/lastRecords\",\n  withAuth(),\n  asyncHandler(async (request, reply) => {\n    const { page, itemsPerPage } = zodValidationForRoute(\n      request.query,\n      z.object({\n        page: z.coerce.number().min(1).default(1),\n        itemsPerPage: z.coerce.number().min(1).max(100).default(10),\n      })\n    );\n    const { userId } = request.decoded!;\n\n    const res = await AffiliationController.getLastAffiliationRecords({\n      page,\n      itemsPerPage,\n      userId,\n    });\n\n    reply.send(handleResponseForRoute(res));\n  })\n);\n\naffiliationRouter.get(\n  \"/affiliationSummary\",\n  withAuth(),\n  asyncHandler(async (request, reply) => {\n    const { userId } = request.decoded!;\n\n    const res = await AffiliationController.getUserAffiliationSummary({ userId });\n\n    reply.send(handleResponseForRoute(res));\n  })\n);\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,qBAAqB,EAAE,MAAM,yCAAyC,CAAC;AAChF,OAAO,EAAE,QAAQ,EAAE,MAAM,2BAA2B,CAAC;AACrD,OAAO,EAAE,YAAY,EAAE,MAAM,yBAAyB,CAAC;AACvD,OAAO,EAAE,sBAAsB,EAAE,MAAM,2BAA2B,CAAC;AACnE,OAAO,EAAE,qBAAqB,EAAE,MAAM,kCAAkC,CAAC;AACzE,OAAO,OAAO,MAAM,SAAS,CAAC;AAC9B,OAAO,EAAE,CAAC,EAAE,MAAM,KAAK,CAAC;AAExB,MAAM,CAAC,MAAM,iBAAiB,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;AAElD,iBAAiB,CAAC,GAAG,CAAC,aAAa,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;IACxE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,qBAAqB,CAClD,OAAO,CAAC,KAAK,EACb,CAAC,CAAC,MAAM,CAAC;QACP,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACzC,YAAY,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC;KAC5D,CAAC,CACH,CAAC;IACF,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC,OAAQ,CAAC;IAEpC,MAAM,GAAG,GAAG,MAAM,qBAAqB,CAAC,iBAAiB,CAAC;QACxD,MAAM;QACN,IAAI;QACJ,YAAY;KACb,CAAC,CAAC;IAEH,KAAK,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC;AAC1C,CAAC,CAAC,CAAC;AAEH,iBAAiB,CAAC,GAAG,CACnB,cAAc,EACd,QAAQ,EAAE,EACV,YAAY,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;IACpC,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,qBAAqB,CAClD,OAAO,CAAC,KAAK,EACb,CAAC,CAAC,MAAM,CAAC;QACP,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;QACzC,YAAY,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC;KAC5D,CAAC,CACH,CAAC;IACF,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC,OAAQ,CAAC;IAEpC,MAAM,GAAG,GAAG,MAAM,qBAAqB,CAAC,yBAAyB,CAAC;QAChE,IAAI;QACJ,YAAY;QACZ,MAAM;KACP,CAAC,CAAC;IAEH,KAAK,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC;AAC1C,CAAC,CAAC,CACH,CAAC;AAEF,iBAAiB,CAAC,GAAG,CACnB,qBAAqB,EACrB,QAAQ,EAAE,EACV,YAAY,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,EAAE;IACpC,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC,OAAQ,CAAC;IAEpC,MAAM,GAAG,GAAG,MAAM,qBAAqB,CAAC,yBAAyB,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;IAE9E,KAAK,CAAC,IAAI,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,CAAC;AAC1C,CAAC,CAAC,CACH,CAAC","debug_id":"2c35cad3-0a0c-5a3f-88c3-bcacbc65c785"}