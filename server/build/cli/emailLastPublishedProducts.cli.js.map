{"version":3,"file":"emailLastPublishedProducts.cli.js","sources":["cli/emailLastPublishedProducts.cli.ts"],"sourceRoot":"/","sourcesContent":["import { configs } from \"@/configs.js\";\nimport { ProductController } from \"@/controllers/product.controller.js\";\nimport { getMonitoringClient } from \"@/libs/MonitoringClient/index.js\";\nimport { getDatabaseConnection } from \"databaseConnection/index.js\";\n\nconst emailLastPublishedProducts = async () => {\n  const monitoringClient = getMonitoringClient();\n  const databaseConnection = getDatabaseConnection();\n\n  try {\n    await databaseConnection.connect();\n    const res = await ProductController.emailLastPublishedProducts({\n      frontendUrl: configs.FRONTEND_URL,\n      lastPublishedProductsPeriodInDays: configs.LAST_PUBLISHED_PRODUCTS_PERIOD_IN_DAYS,\n    });\n\n    console.log(\"res: \", res.data);\n  } catch (err: any) {\n    console.log(err);\n    monitoringClient.sendEvent({\n      level: \"error\",\n      eventName: \"email_last_published_products\",\n      data: {\n        message: err.message,\n      },\n    });\n  }\n\n  await databaseConnection.disconnect();\n  process.exit(0);\n};\n\nemailLastPublishedProducts();\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AACvC,OAAO,EAAE,iBAAiB,EAAE,MAAM,qCAAqC,CAAC;AACxE,OAAO,EAAE,mBAAmB,EAAE,MAAM,kCAAkC,CAAC;AACvE,OAAO,EAAE,qBAAqB,EAAE,MAAM,6BAA6B,CAAC;AAEpE,MAAM,0BAA0B,GAAG,KAAK,IAAI,EAAE;IAC5C,MAAM,gBAAgB,GAAG,mBAAmB,EAAE,CAAC;IAC/C,MAAM,kBAAkB,GAAG,qBAAqB,EAAE,CAAC;IAEnD,IAAI,CAAC;QACH,MAAM,kBAAkB,CAAC,OAAO,EAAE,CAAC;QACnC,MAAM,GAAG,GAAG,MAAM,iBAAiB,CAAC,0BAA0B,CAAC;YAC7D,WAAW,EAAE,OAAO,CAAC,YAAY;YACjC,iCAAiC,EAAE,OAAO,CAAC,sCAAsC;SAClF,CAAC,CAAC;QAEH,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAAC,OAAO,GAAQ,EAAE,CAAC;QAClB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACjB,gBAAgB,CAAC,SAAS,CAAC;YACzB,KAAK,EAAE,OAAO;YACd,SAAS,EAAE,+BAA+B;YAC1C,IAAI,EAAE;gBACJ,OAAO,EAAE,GAAG,CAAC,OAAO;aACrB;SACF,CAAC,CAAC;IACL,CAAC;IAED,MAAM,kBAAkB,CAAC,UAAU,EAAE,CAAC;IACtC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAClB,CAAC,CAAC;AAEF,0BAA0B,EAAE,CAAC","debug_id":"c054e2f8-8657-5a88-80fb-474f97e021b7"}