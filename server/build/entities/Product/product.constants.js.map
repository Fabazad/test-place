{"version":3,"file":"product.constants.js","sources":["entities/Product/product.constants.ts"],"sourceRoot":"/","sourcesContent":["import { configs } from \"@/configs.js\";\nimport { InferEnum } from \"@/utils/inferEnum.js\";\nimport { booleanSchema, numberSchema } from \"@/utils/zod.utils.js\";\nimport z from \"zod\";\nimport { Product, PRODUCT_CATEGORIES, productDataSchema } from \"./product.entity.js\";\n\nexport type ProductCategory = (typeof PRODUCT_CATEGORIES)[number];\nexport const isProductCategory = (category: string): category is ProductCategory =>\n  PRODUCT_CATEGORIES.includes(category as ProductCategory);\n\nexport const ProductSortBy = {\n  CREATED_AT: \"createdAt\",\n  SCORE: \"score\",\n  PRICE: \"price\",\n  FINAL_PRICE: \"finalPrice\",\n} as const;\nexport type ProductSortBy = InferEnum<typeof ProductSortBy>;\n\nexport const productSearchDataSchema = z.object({\n  category: z.enum(PRODUCT_CATEGORIES).optional(),\n  keyWords: z.string().optional(),\n  minPrice: numberSchema({ min: 0 }).optional(),\n  maxPrice: numberSchema({ min: 0 }).optional(),\n  free: booleanSchema().optional(),\n  automaticAcceptance: booleanSchema().optional(),\n  prime: booleanSchema().optional(),\n  itemsPerPage: numberSchema({ min: 1, max: 100 }),\n  page: numberSchema({ min: 1 }),\n  sortBy: z.nativeEnum(ProductSortBy).optional().default(ProductSortBy.CREATED_AT),\n  published: booleanSchema().optional(),\n  remainingRequests: booleanSchema().optional(),\n  seller: z.string().optional(),\n});\nexport type ProductSearchData = z.infer<typeof productSearchDataSchema>;\n\nexport const productUpdateDataSchema = productDataSchema.pick({\n  title: true,\n  description: true,\n  isPrime: true,\n  maxDemands: true,\n  automaticAcceptance: true,\n  keywords: true,\n  privateNote: true,\n  imageUrls: true,\n  category: true,\n  price: true,\n  finalPrice: true,\n});\n\nexport type ProductUpdateData = z.infer<typeof productUpdateDataSchema>;\n\nexport const generateAmazonUrl = (product: Product): string => {\n  const formattedKeywords = product.keywords?.join(\"+\");\n  const keywordsQuery = formattedKeywords ? `keywords=${formattedKeywords}` : \"\";\n  return `https://www.amazon.fr/dp/${product.asin}?${keywordsQuery}&tag=${configs.AMAZON_AFFILIATION_TAG}`;\n};\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AAEvC,OAAO,EAAE,aAAa,EAAE,YAAY,EAAE,MAAM,sBAAsB,CAAC;AACnE,OAAO,CAAC,MAAM,KAAK,CAAC;AACpB,OAAO,EAAW,kBAAkB,EAAE,iBAAiB,EAAE,MAAM,qBAAqB,CAAC;AAGrF,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAAC,QAAgB,EAA+B,EAAE,CACjF,kBAAkB,CAAC,QAAQ,CAAC,QAA2B,CAAC,CAAC;AAE3D,MAAM,CAAC,MAAM,aAAa,GAAG;IAC3B,UAAU,EAAE,WAAW;IACvB,KAAK,EAAE,OAAO;IACd,KAAK,EAAE,OAAO;IACd,WAAW,EAAE,YAAY;CACjB,CAAC;AAGX,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC;IAC9C,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,QAAQ,EAAE;IAC/C,QAAQ,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC/B,QAAQ,EAAE,YAAY,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;IAC7C,QAAQ,EAAE,YAAY,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE;IAC7C,IAAI,EAAE,aAAa,EAAE,CAAC,QAAQ,EAAE;IAChC,mBAAmB,EAAE,aAAa,EAAE,CAAC,QAAQ,EAAE;IAC/C,KAAK,EAAE,aAAa,EAAE,CAAC,QAAQ,EAAE;IACjC,YAAY,EAAE,YAAY,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;IAChD,IAAI,EAAE,YAAY,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;IAC9B,MAAM,EAAE,CAAC,CAAC,UAAU,CAAC,aAAa,CAAC,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC;IAChF,SAAS,EAAE,aAAa,EAAE,CAAC,QAAQ,EAAE;IACrC,iBAAiB,EAAE,aAAa,EAAE,CAAC,QAAQ,EAAE;IAC7C,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;CAC9B,CAAC,CAAC;AAGH,MAAM,CAAC,MAAM,uBAAuB,GAAG,iBAAiB,CAAC,IAAI,CAAC;IAC5D,KAAK,EAAE,IAAI;IACX,WAAW,EAAE,IAAI;IACjB,OAAO,EAAE,IAAI;IACb,UAAU,EAAE,IAAI;IAChB,mBAAmB,EAAE,IAAI;IACzB,QAAQ,EAAE,IAAI;IACd,WAAW,EAAE,IAAI;IACjB,SAAS,EAAE,IAAI;IACf,QAAQ,EAAE,IAAI;IACd,KAAK,EAAE,IAAI;IACX,UAAU,EAAE,IAAI;CACjB,CAAC,CAAC;AAIH,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAAC,OAAgB,EAAU,EAAE;IAC5D,MAAM,iBAAiB,GAAG,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IACtD,MAAM,aAAa,GAAG,iBAAiB,CAAC,CAAC,CAAC,YAAY,iBAAiB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC;IAC/E,OAAO,4BAA4B,OAAO,CAAC,IAAI,IAAI,aAAa,QAAQ,OAAO,CAAC,sBAAsB,EAAE,CAAC;AAC3G,CAAC,CAAC","debug_id":"6ca8584c-e1a3-54d5-850c-505a551ab319"}