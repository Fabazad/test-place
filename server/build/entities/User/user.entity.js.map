{"version":3,"file":"user.entity.js","sources":["entities/User/user.entity.ts"],"sourceRoot":"/","sourcesContent":["import { Role } from \"@/utils/constants.js\";\nimport { InferEnum } from \"@/utils/inferEnum.js\";\nimport { Language } from \"@/utils/Language.js\";\nimport { savedDataSchema } from \"@/utils/savedDataSchema.js\";\nimport z from \"zod\";\n\nexport const ActivationEventType = {\n  EMAIL_VALIDATION: \"emailValidation\",\n  FIRST_TEST_REQUEST: \"firstTestRequest\",\n  FIRST_PRODUCT_ORDERED: \"firstProductOrdered\",\n  FIRST_PRODUCT_RECEIVED: \"firstProductReceived\",\n  FIRST_PRODUCT_REVIEWED: \"firstProductReviewed\",\n  FIRST_MONEY_RECEIVED: \"firstMoneyReceived\",\n} as const;\nexport type ActivationEventType = InferEnum<typeof ActivationEventType>;\n\nconst activationEventTypeSchema = z.object({\n  eventType: z.nativeEnum(ActivationEventType),\n  eventDate: z.date(),\n});\n\nexport const userDataSchema = z.object({\n  name: z.string().min(1),\n  email: z.string().email(),\n  password: z.string().nullish().default(null),\n  emailValidation: z.boolean().default(false),\n  resetPasswordToken: z.string().optional(),\n  resetPasswordExpires: z.date().optional(),\n  amazonId: z.string().optional(),\n  testerMessage: z.string().optional(),\n  sellerMessage: z.string().optional(),\n  roles: z.array(z.nativeEnum(Role)).min(1),\n  paypalEmail: z.string().email().optional(),\n  lastLogin: z.date().optional(),\n  googleId: z.string().nullish(),\n  facebookId: z.string().nullish(),\n  language: z.nativeEnum(Language),\n  isCertified: z.boolean().default(false),\n  affiliatedBy: z.string({ description: \"User\" }).optional(),\n  personalAffiliationRateInPercent: z.number().optional(),\n  ips: z.array(z.string()).optional(),\n});\nexport type UserData = z.infer<typeof userDataSchema>;\n\nexport const userSchema = userDataSchema\n  .extend(savedDataSchema)\n  .omit({ affiliatedBy: true })\n  .extend({\n    affiliated: z\n      .object({\n        by: z.string({ description: \"User\" }),\n        rateInPercent: z.number(),\n      })\n      .optional(),\n    activationEvents: z.array(activationEventTypeSchema).default([]),\n  });\nexport type User = z.infer<typeof userSchema>;\nexport type UserWithoutPassword = Omit<User, \"password\">;\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,sBAAsB,CAAC;AAE5C,OAAO,EAAE,QAAQ,EAAE,MAAM,qBAAqB,CAAC;AAC/C,OAAO,EAAE,eAAe,EAAE,MAAM,4BAA4B,CAAC;AAC7D,OAAO,CAAC,MAAM,KAAK,CAAC;AAEpB,MAAM,CAAC,MAAM,mBAAmB,GAAG;IACjC,gBAAgB,EAAE,iBAAiB;IACnC,kBAAkB,EAAE,kBAAkB;IACtC,qBAAqB,EAAE,qBAAqB;IAC5C,sBAAsB,EAAE,sBAAsB;IAC9C,sBAAsB,EAAE,sBAAsB;IAC9C,oBAAoB,EAAE,oBAAoB;CAClC,CAAC;AAGX,MAAM,yBAAyB,GAAG,CAAC,CAAC,MAAM,CAAC;IACzC,SAAS,EAAE,CAAC,CAAC,UAAU,CAAC,mBAAmB,CAAC;IAC5C,SAAS,EAAE,CAAC,CAAC,IAAI,EAAE;CACpB,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,cAAc,GAAG,CAAC,CAAC,MAAM,CAAC;IACrC,IAAI,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IACvB,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE;IACzB,QAAQ,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;IAC5C,eAAe,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;IAC3C,kBAAkB,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACzC,oBAAoB,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,QAAQ,EAAE;IACzC,QAAQ,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC/B,aAAa,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACpC,aAAa,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACpC,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IACzC,WAAW,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,KAAK,EAAE,CAAC,QAAQ,EAAE;IAC1C,SAAS,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,QAAQ,EAAE;IAC9B,QAAQ,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE;IAC9B,UAAU,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE;IAChC,QAAQ,EAAE,CAAC,CAAC,UAAU,CAAC,QAAQ,CAAC;IAChC,WAAW,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC;IACvC,YAAY,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;IAC1D,gCAAgC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACvD,GAAG,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,QAAQ,EAAE;CACpC,CAAC,CAAC;AAGH,MAAM,CAAC,MAAM,UAAU,GAAG,cAAc;KACrC,MAAM,CAAC,eAAe,CAAC;KACvB,IAAI,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;KAC5B,MAAM,CAAC;IACN,UAAU,EAAE,CAAC;SACV,MAAM,CAAC;QACN,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,MAAM,EAAE,CAAC;QACrC,aAAa,EAAE,CAAC,CAAC,MAAM,EAAE;KAC1B,CAAC;SACD,QAAQ,EAAE;IACb,gBAAgB,EAAE,CAAC,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC;CACjE,CAAC,CAAC","debug_id":"e5732d80-9454-5931-8650-2f57fbda2f9e"}