{"version":3,"file":"index.js","sources":["libs/AmazonClient/scrapperProductHelpers/index.ts"],"sourceRoot":"/","sourcesContent":["import axios from \"axios\";\nimport cheerio from \"cheerio\";\nimport { AmazonClient } from \"../type.js\";\nimport { getCategory } from \"./getCategory.js\";\nimport { getDescription } from \"./getDescription.js\";\nimport { getImages } from \"./getImages.js\";\nimport { getIsPrime } from \"./getIsPrime.js\";\nimport { getPrice } from \"./getPrice.js\";\nimport { getSeller } from \"./getSeller.js\";\nimport { getTitle } from \"./getTitle.js\";\n\nexport const getAmazonProductDetails: AmazonClient[\"getAmazonProductDetails\"] = async ({\n  asin,\n  amazonMerchantId,\n}) => {\n  const url = `https://www.amazon.fr/dp/${asin}${\n    amazonMerchantId ? `?m=${amazonMerchantId}` : \"\"\n  }`;\n\n  const result = await axios.get<string>(url, {\n    headers: {\n      \"User-Agent\":\n        \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36\",\n      \"Accept-Language\": \"fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7\",\n      Accept:\n        \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\n      \"Sec-Fetch-Site\": \"same-origin\",\n      \"Sec-Fetch-Mode\": \"navigate\",\n      \"Sec-Fetch-User\": \"?1\",\n      \"Sec-Fetch-Dest\": \"document\",\n      Referer: \"https://www.amazon.fr/\",\n      \"Upgrade-Insecure-Requests\": \"1\",\n    },\n  });\n\n  const $ = cheerio.load(result.data);\n\n  const scrapRes = {\n    title: getTitle($),\n    price: getPrice($),\n    description: getDescription($),\n    isPrime: getIsPrime($),\n    category: getCategory($),\n    seller: getSeller($),\n    imageUrls: getImages($),\n  };\n\n  return { success: true, data: scrapRes };\n};\n"],"names":[],"mappings":";;AAAA,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,OAAO,MAAM,SAAS,CAAC;AAE9B,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAC;AAC/C,OAAO,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAC;AACrD,OAAO,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAC3C,OAAO,EAAE,UAAU,EAAE,MAAM,iBAAiB,CAAC;AAC7C,OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACzC,OAAO,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAC3C,OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AAEzC,MAAM,CAAC,MAAM,uBAAuB,GAA4C,KAAK,EAAE,EACrF,IAAI,EACJ,gBAAgB,GACjB,EAAE,EAAE;IACH,MAAM,GAAG,GAAG,4BAA4B,IAAI,GAC1C,gBAAgB,CAAC,CAAC,CAAC,MAAM,gBAAgB,EAAE,CAAC,CAAC,CAAC,EAChD,EAAE,CAAC;IAEH,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC,GAAG,CAAS,GAAG,EAAE;QAC1C,OAAO,EAAE;YACP,YAAY,EACV,iHAAiH;YACnH,iBAAiB,EAAE,qCAAqC;YACxD,MAAM,EACJ,yIAAyI;YAC3I,gBAAgB,EAAE,aAAa;YAC/B,gBAAgB,EAAE,UAAU;YAC5B,gBAAgB,EAAE,IAAI;YACtB,gBAAgB,EAAE,UAAU;YAC5B,OAAO,EAAE,wBAAwB;YACjC,2BAA2B,EAAE,GAAG;SACjC;KACF,CAAC,CAAC;IAEH,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAEpC,MAAM,QAAQ,GAAG;QACf,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;QAClB,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;QAClB,WAAW,EAAE,cAAc,CAAC,CAAC,CAAC;QAC9B,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;QACtB,QAAQ,EAAE,WAAW,CAAC,CAAC,CAAC;QACxB,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;QACpB,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;KACxB,CAAC;IAEF,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;AAC3C,CAAC,CAAC","debug_id":"5fd01e51-7244-5185-b834-86cfa5a621f6"}