{"version":3,"file":"sendTransactionalEmail.js","sources":["libs/EmailClient/sendTransactionalEmail.ts"],"sourceRoot":"/","sourcesContent":["import { CustomResponse } from \"@/utils/CustomResponse.js\";\nimport axios, { AxiosInstance } from \"axios\";\n\nexport const sendTransactionalEmail = async (params: {\n  brevoAxios: AxiosInstance;\n  from: { name?: string; email: string };\n  to: { name?: string; email: string };\n  templateId: string;\n  templateParams: Record<string, any>;\n}): Promise<CustomResponse<string, \"email_not_sent\">> => {\n  const { brevoAxios, from, to, templateId, templateParams } = params;\n  try {\n    const res = await brevoAxios.post<{ messageId: string }>(\"/smtp/email\", {\n      sender: from,\n      to: [to],\n      templateId,\n      params: templateParams,\n    });\n\n    return { success: true, data: res.data.messageId };\n  } catch (err: unknown) {\n    if (axios.isAxiosError<{ code: string; message: string }>(err) && err.response) {\n      const { code, message } = err.response.data;\n      return {\n        success: false,\n        errorCode: \"email_not_sent\",\n        errorMessage: `[${code}]: ${message}`,\n      };\n    }\n    return {\n      success: false,\n      errorCode: \"email_not_sent\",\n      errorMessage: err?.toString(),\n    };\n  }\n};\n"],"names":[],"mappings":";;AACA,OAAO,KAAwB,MAAM,OAAO,CAAC;AAE7C,MAAM,CAAC,MAAM,sBAAsB,GAAG,KAAK,EAAE,MAM5C,EAAqD,EAAE;IACtD,MAAM,EAAE,UAAU,EAAE,IAAI,EAAE,EAAE,EAAE,UAAU,EAAE,cAAc,EAAE,GAAG,MAAM,CAAC;IACpE,IAAI,CAAC;QACH,MAAM,GAAG,GAAG,MAAM,UAAU,CAAC,IAAI,CAAwB,aAAa,EAAE;YACtE,MAAM,EAAE,IAAI;YACZ,EAAE,EAAE,CAAC,EAAE,CAAC;YACR,UAAU;YACV,MAAM,EAAE,cAAc;SACvB,CAAC,CAAC;QAEH,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IACrD,CAAC;IAAC,OAAO,GAAY,EAAE,CAAC;QACtB,IAAI,KAAK,CAAC,YAAY,CAAoC,GAAG,CAAC,IAAI,GAAG,CAAC,QAAQ,EAAE,CAAC;YAC/E,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC;YAC5C,OAAO;gBACL,OAAO,EAAE,KAAK;gBACd,SAAS,EAAE,gBAAgB;gBAC3B,YAAY,EAAE,IAAI,IAAI,MAAM,OAAO,EAAE;aACtC,CAAC;QACJ,CAAC;QACD,OAAO;YACL,OAAO,EAAE,KAAK;YACd,SAAS,EAAE,gBAAgB;YAC3B,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE;SAC9B,CAAC;IACJ,CAAC;AACH,CAAC,CAAC","debug_id":"12d0bac1-0d1b-5de5-a86b-c8850b367065"}