{"version":3,"file":"index.js","sources":["libs/Scrapper/index.ts"],"sourceRoot":"/","sourcesContent":["import { createSingletonGetter } from \"@/utils/singleton.js\";\nimport axios from \"axios-https-proxy-fix\";\nimport cheerio from \"cheerio\";\nimport { getCategory } from \"./productHelpers/getCategory.js\";\nimport { getDescription } from \"./productHelpers/getDescription.js\";\nimport { getImages } from \"./productHelpers/getImages.js\";\nimport { getIsPrime } from \"./productHelpers/getIsPrime.js\";\nimport { getPrice } from \"./productHelpers/getPrice.js\";\nimport { getSeller } from \"./productHelpers/getSeller.js\";\nimport { getTitle } from \"./productHelpers/getTitle.js\";\nimport { Scrapper } from \"./type.js\";\n\nconst createScrapper = (): Scrapper => {\n  return {\n    getAmazonProductDetails: async ({ asin }) => {\n      const url = `https://www.amazon.fr/dp/${asin}`;\n\n      var session_id = (1000000 * Math.random()) | 0;\n\n      const test = await axios.default.get<string>(url, {\n        headers: {},\n        proxy: {\n          host: \"brd.superproxy.io\",\n          port: 22225,\n          auth: {\n            username:\n              \"brd-customer-hl_19852198-zone-datacenter_proxy1\" +\n              \"-country-fr-session-\" +\n              session_id,\n            password: \"gp6ycnmv2g6k\",\n          },\n        },\n      });\n\n      const $ = cheerio.load(test.data);\n\n      const scrapRes = {\n        title: getTitle($),\n        price: getPrice($),\n        description: getDescription($),\n        isPrime: getIsPrime($),\n        category: getCategory($),\n        seller: getSeller($),\n        imageUrls: getImages($),\n      };\n\n      return { success: true, data: scrapRes };\n    },\n  };\n};\n\nexport const getScrapper = createSingletonGetter(createScrapper);\n"],"names":[],"mappings":";;AAAA,OAAO,EAAE,qBAAqB,EAAE,MAAM,sBAAsB,CAAC;AAC7D,OAAO,KAAK,MAAM,uBAAuB,CAAC;AAC1C,OAAO,OAAO,MAAM,SAAS,CAAC;AAC9B,OAAO,EAAE,WAAW,EAAE,MAAM,iCAAiC,CAAC;AAC9D,OAAO,EAAE,cAAc,EAAE,MAAM,oCAAoC,CAAC;AACpE,OAAO,EAAE,SAAS,EAAE,MAAM,+BAA+B,CAAC;AAC1D,OAAO,EAAE,UAAU,EAAE,MAAM,gCAAgC,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AACxD,OAAO,EAAE,SAAS,EAAE,MAAM,+BAA+B,CAAC;AAC1D,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AAGxD,MAAM,cAAc,GAAG,GAAa,EAAE;IACpC,OAAO;QACL,uBAAuB,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE;YAC1C,MAAM,GAAG,GAAG,4BAA4B,IAAI,EAAE,CAAC;YAE/C,IAAI,UAAU,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,CAAC;YAE/C,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,OAAO,CAAC,GAAG,CAAS,GAAG,EAAE;gBAChD,OAAO,EAAE,EAAE;gBACX,KAAK,EAAE;oBACL,IAAI,EAAE,mBAAmB;oBACzB,IAAI,EAAE,KAAK;oBACX,IAAI,EAAE;wBACJ,QAAQ,EACN,iDAAiD;4BACjD,sBAAsB;4BACtB,UAAU;wBACZ,QAAQ,EAAE,cAAc;qBACzB;iBACF;aACF,CAAC,CAAC;YAEH,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAElC,MAAM,QAAQ,GAAG;gBACf,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;gBAClB,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;gBAClB,WAAW,EAAE,cAAc,CAAC,CAAC,CAAC;gBAC9B,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;gBACtB,QAAQ,EAAE,WAAW,CAAC,CAAC,CAAC;gBACxB,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;gBACpB,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;aACxB,CAAC;YAEF,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;QAC3C,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,qBAAqB,CAAC,cAAc,CAAC,CAAC","debug_id":"f180b9f2-5be0-5052-ae36-106ceeea13b3"}