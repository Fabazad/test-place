{"version":3,"file":"index.js","sources":["libs/Scrapper/index.ts"],"sourceRoot":"/","sourcesContent":["process.env.NODE_TLS_REJECT_UNAUTHORIZED = \"0\";\nimport { configs } from \"@/configs.js\";\nimport { createSingletonGetter } from \"@/utils/singleton.js\";\nimport axios from \"axios-https-proxy-fix\";\nimport cheerio from \"cheerio\";\nimport { getCategory } from \"./productHelpers/getCategory.js\";\nimport { getDescription } from \"./productHelpers/getDescription.js\";\nimport { getImages } from \"./productHelpers/getImages.js\";\nimport { getIsPrime } from \"./productHelpers/getIsPrime.js\";\nimport { getPrice } from \"./productHelpers/getPrice.js\";\nimport { getSeller } from \"./productHelpers/getSeller.js\";\nimport { getTitle } from \"./productHelpers/getTitle.js\";\nimport { Scrapper } from \"./type.js\";\n\nconst createScrapper = (): Scrapper => {\n  return {\n    getAmazonProductDetails: async ({ asin, amazonMerchantId }) => {\n      const url = `https://www.amazon.fr/dp/${asin}${\n        amazonMerchantId ? `?m=${amazonMerchantId}` : \"\"\n      }`;\n\n      const test = await axios.default.get<string>(url, {\n        proxy: {\n          host: configs.PROXY_HOST,\n          port: configs.PROXY_PORT,\n          auth: {\n            username: configs.PROXY_USERNAME,\n            password: configs.PROXY_PASSWORD,\n          },\n        },\n      });\n\n      const $ = cheerio.load(test.data);\n\n      const scrapRes = {\n        title: getTitle($),\n        price: getPrice($),\n        description: getDescription($),\n        isPrime: getIsPrime($),\n        category: getCategory($),\n        seller: getSeller($),\n        imageUrls: getImages($),\n      };\n\n      return { success: true, data: scrapRes };\n    },\n  };\n};\n\nexport const getScrapper = createSingletonGetter(createScrapper);\n"],"names":[],"mappings":";;AAAA,OAAO,CAAC,GAAG,CAAC,4BAA4B,GAAG,GAAG,CAAC;AAC/C,OAAO,EAAE,OAAO,EAAE,MAAM,cAAc,CAAC;AACvC,OAAO,EAAE,qBAAqB,EAAE,MAAM,sBAAsB,CAAC;AAC7D,OAAO,KAAK,MAAM,uBAAuB,CAAC;AAC1C,OAAO,OAAO,MAAM,SAAS,CAAC;AAC9B,OAAO,EAAE,WAAW,EAAE,MAAM,iCAAiC,CAAC;AAC9D,OAAO,EAAE,cAAc,EAAE,MAAM,oCAAoC,CAAC;AACpE,OAAO,EAAE,SAAS,EAAE,MAAM,+BAA+B,CAAC;AAC1D,OAAO,EAAE,UAAU,EAAE,MAAM,gCAAgC,CAAC;AAC5D,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AACxD,OAAO,EAAE,SAAS,EAAE,MAAM,+BAA+B,CAAC;AAC1D,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AAGxD,MAAM,cAAc,GAAG,GAAa,EAAE;IACpC,OAAO;QACL,uBAAuB,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE,EAAE,EAAE;YAC5D,MAAM,GAAG,GAAG,4BAA4B,IAAI,GAC1C,gBAAgB,CAAC,CAAC,CAAC,MAAM,gBAAgB,EAAE,CAAC,CAAC,CAAC,EAChD,EAAE,CAAC;YAEH,MAAM,IAAI,GAAG,MAAM,KAAK,CAAC,OAAO,CAAC,GAAG,CAAS,GAAG,EAAE;gBAChD,KAAK,EAAE;oBACL,IAAI,EAAE,OAAO,CAAC,UAAU;oBACxB,IAAI,EAAE,OAAO,CAAC,UAAU;oBACxB,IAAI,EAAE;wBACJ,QAAQ,EAAE,OAAO,CAAC,cAAc;wBAChC,QAAQ,EAAE,OAAO,CAAC,cAAc;qBACjC;iBACF;aACF,CAAC,CAAC;YAEH,MAAM,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAElC,MAAM,QAAQ,GAAG;gBACf,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;gBAClB,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;gBAClB,WAAW,EAAE,cAAc,CAAC,CAAC,CAAC;gBAC9B,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;gBACtB,QAAQ,EAAE,WAAW,CAAC,CAAC,CAAC;gBACxB,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC;gBACpB,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC;aACxB,CAAC;YAEF,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;QAC3C,CAAC;KACF,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,qBAAqB,CAAC,cAAc,CAAC,CAAC","debug_id":"c9e8a310-f13d-5465-b5ff-58a7cbb5d73a"}